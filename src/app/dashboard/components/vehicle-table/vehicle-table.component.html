<div class="vehicle-panel">
  <div class="panel-header">
    <div class="header-content">
      <h3 class="panel-title">PERFORMANCE POR VEÍCULO</h3>
      <p class="panel-subtitle">Análise de rentabilidade da frota</p>
    </div>
    <div class="header-badge">
      <mat-icon class="badge-icon">local_shipping</mat-icon>
      <span>{{ vehicles.length }} ATIVOS</span>
    </div>
  </div>

  <div class="table-container">
    <table mat-table [dataSource]="vehicles" class="vehicle-table">
      
      <!-- Coluna Veículo -->
      <ng-container matColumnDef="veiculo">
        <th mat-header-cell *matHeaderCellDef>VEÍCULO</th>
        <td mat-cell *matCellDef="let vehicle">
          <div class="vehicle-info">
            <mat-icon class="vehicle-icon">local_shipping</mat-icon>
            <div class="vehicle-details">
              <span class="vehicle-name">{{ vehicle.placa }}</span>
              <span class="vehicle-model">{{ vehicle.marca }}</span>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Coluna Viagens -->
      <ng-container matColumnDef="viagens">
        <th mat-header-cell *matHeaderCellDef>VIAGENS</th>
        <td mat-cell *matCellDef="let vehicle">
          <span class="value-badge">{{ vehicle.totalViagens }}</span>
        </td>
      </ng-container>

      <!-- Coluna Receita -->
      <ng-container matColumnDef="receita">
        <th mat-header-cell *matHeaderCellDef>RECEITA</th>
        <td mat-cell *matCellDef="let vehicle">
          <span class="currency-value revenue">{{ vehicle.receita | currency:'BRL':'symbol':'1.0-0' }}</span>
        </td>
      </ng-container>

      <!-- Coluna Despesas -->
      <ng-container matColumnDef="despesas">
        <th mat-header-cell *matHeaderCellDef>DESPESAS</th>
        <td mat-cell *matCellDef="let vehicle">
          <span class="currency-value expense">{{ vehicle.despesas | currency:'BRL':'symbol':'1.0-0' }}</span>
        </td>
      </ng-container>

      <!-- Coluna Lucro -->
      <ng-container matColumnDef="lucro">
        <th mat-header-cell *matHeaderCellDef>LUCRO</th>
        <td mat-cell *matCellDef="let vehicle">
          <span class="currency-value profit" [class.negative]="vehicle.lucro < 0">
            {{ vehicle.lucro | currency:'BRL':'symbol':'1.0-0' }}
          </span>
        </td>
      </ng-container>

      <!-- Coluna Performance -->
      <ng-container matColumnDef="performance">
        <th mat-header-cell *matHeaderCellDef>PERFORMANCE</th>
        <td mat-cell *matCellDef="let vehicle">
          <div class="performance-indicator" [class]="getPerformanceClass(vehicle.percentualLucro)">
            <div class="indicator-bar">
              <div class="indicator-fill" [style.width.%]="vehicle.percentualLucro > 0 ? Math.min(vehicle.percentualLucro, 100) : 0"></div>
            </div>
            <span class="indicator-value">{{ vehicle.percentualLucro }}%</span>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="data-row"></tr>
    </table>

    <div class="no-data" *ngIf="vehicles.length === 0">
      <mat-icon>inbox</mat-icon>
      <p>Nenhum veículo com dados</p>
    </div>
  </div>
  
  <div class="panel-corner"></div>
</div>
